[gd_scene load_steps=103 format=3 uid="uid://cwjjqyorvakym"]

[ext_resource type="FontFile" uid="uid://bdf26hkq2td8r" path="res://assets/kenney/kenney_ui-pack/Font/kenvector_future_thin.ttf" id="1_cnwah"]
[ext_resource type="Texture2D" uid="uid://bl824tvr05ine" path="res://assets/kenney/kenney_ui-pack/PNG/grey_button00.png" id="2_3ahfj"]
[ext_resource type="Script" path="res://scripts/audio/audio_list.gd" id="2_bfr04"]
[ext_resource type="Texture2D" uid="uid://dqu8kim6qvskn" path="res://assets/kenney/kenney_ui-pack/PNG/green_button10.png" id="2_whvft"]
[ext_resource type="Texture2D" uid="uid://dap1733rrkqyw" path="res://assets/kenney/kenney_ui-pack/PNG/grey_crossGrey.png" id="3_i7e3p"]
[ext_resource type="AudioStream" uid="uid://dxa3kdb7d7ugm" path="res://assets/audio/kenney_ui-audio/Audio/click1.ogg" id="3_uh4a2"]
[ext_resource type="Texture2D" uid="uid://cionnh1nd384b" path="res://assets/kenney/kenney_ui-pack/PNG/red_button01.png" id="3_y0kql"]
[ext_resource type="Texture2D" uid="uid://cedj0ci5h3d0a" path="res://assets/kenney/kenney_ui-pack/PNG/green_panel.png" id="4_8musn"]
[ext_resource type="Texture2D" uid="uid://dm8x6bce6cfm2" path="res://assets/kenney/kenney_ui-pack/PNG/red_button00.png" id="4_qnttq"]
[ext_resource type="AudioStream" uid="uid://bpleif45g7nqw" path="res://assets/audio/kenney_ui-audio/Audio/click2.ogg" id="4_s6o33"]
[ext_resource type="Texture2D" uid="uid://crfddtl2yns0u" path="res://assets/kenney/kenney_ui-pack/PNG/blue_button00.png" id="5_5mmy2"]
[ext_resource type="Texture2D" uid="uid://dhahnnjppku2s" path="res://assets/kenney/kenney_ui-pack/PNG/red_button07.png" id="5_7ouj8"]
[ext_resource type="AudioStream" uid="uid://bxmjgnnwj44k6" path="res://assets/audio/kenney_ui-audio/Audio/click3.ogg" id="5_gbxee"]
[ext_resource type="AudioStream" uid="uid://bonwo33lxday8" path="res://assets/audio/kenney_ui-audio/Audio/click4.ogg" id="6_n1leb"]
[ext_resource type="Texture2D" uid="uid://b2dmrbnjwihv7" path="res://assets/kenney/kenney_ui-pack/PNG/blue_button01.png" id="6_wtw1i"]
[ext_resource type="Texture2D" uid="uid://clhpbxksikdkm" path="res://assets/kenney/kenney_ui-pack/PNG/red_button13.png" id="7_pjynr"]
[ext_resource type="AudioStream" uid="uid://wx1kk88shqtw" path="res://assets/audio/kenney_ui-audio/Audio/click5.ogg" id="7_qclgw"]
[ext_resource type="Texture2D" uid="uid://duacvj3v7702f" path="res://assets/kenney/kenney_ui-pack/PNG/blue_button02.png" id="7_ylyai"]
[ext_resource type="AudioStream" uid="uid://cowcj26nn10kk" path="res://assets/audio/kenney_ui-audio/Audio/switch1.ogg" id="8_jvp7b"]
[ext_resource type="Texture2D" uid="uid://dgc76cx6utdtb" path="res://assets/kenney/kenney_ui-pack/PNG/blue_button03.png" id="8_tdxnv"]
[ext_resource type="Texture2D" uid="uid://b14x3g2cjdl" path="res://assets/kenney/kenney_ui-pack/PNG/blue_button04.png" id="9_3n0b5"]
[ext_resource type="AudioStream" uid="uid://c2u51bnc0pxtb" path="res://assets/audio/kenney_ui-audio/Audio/switch2.ogg" id="9_udjct"]
[ext_resource type="AudioStream" uid="uid://dk7mjjhwjpfrc" path="res://assets/audio/kenney_ui-audio/Audio/switch3.ogg" id="10_jygyq"]
[ext_resource type="Texture2D" uid="uid://b77dwdec5wg3q" path="res://assets/kenney/kenney_ui-pack/PNG/red_button02.png" id="10_s564t"]
[ext_resource type="Texture2D" uid="uid://bi7nnx78xrt1j" path="res://assets/kenney/kenney_ui-pack/PNG/red_button09.png" id="10_x3v8o"]
[ext_resource type="AudioStream" uid="uid://cbqcmde5jwqpe" path="res://assets/audio/kenney_ui-audio/Audio/switch4.ogg" id="11_8wsct"]
[ext_resource type="Texture2D" uid="uid://dhkpae8nx4ufc" path="res://assets/kenney/kenney_ui-pack/PNG/red_button11.png" id="11_i8xw5"]
[ext_resource type="Texture2D" uid="uid://yqet5cwa7oud" path="res://assets/kenney/kenney_ui-pack/PNG/blue_button05.png" id="11_juupq"]
[ext_resource type="Texture2D" uid="uid://dcyc0i6l00vjp" path="res://assets/kenney/kenney_ui-pack/PNG/red_button12.png" id="12_asujs"]
[ext_resource type="Texture2D" uid="uid://bxla7ujm52rqv" path="res://assets/kenney/kenney_ui-pack/PNG/green_button12.png" id="12_bexpq"]
[ext_resource type="AudioStream" uid="uid://dk2bcq87hngvw" path="res://assets/audio/kenney_ui-audio/Audio/switch5.ogg" id="12_l7rcj"]
[ext_resource type="AudioStream" uid="uid://tmc8efse5bxq" path="res://assets/audio/kenney_ui-audio/Audio/switch6.ogg" id="13_7qo6n"]
[ext_resource type="Texture2D" uid="uid://dy8d8kd08wf5y" path="res://assets/kenney/kenney_ui-pack/PNG/green_button11.png" id="13_hsqbb"]
[ext_resource type="AudioStream" uid="uid://dcurhapoes262" path="res://assets/audio/kenney_ui-audio/Audio/switch7.ogg" id="14_luetl"]
[ext_resource type="AudioStream" uid="uid://beckqidnu8r0c" path="res://assets/audio/kenney_ui-audio/Audio/switch8.ogg" id="15_ydxs8"]
[ext_resource type="AudioStream" uid="uid://b3m2fur6ut28s" path="res://assets/audio/kenney_ui-audio/Audio/switch9.ogg" id="16_g325f"]
[ext_resource type="AudioStream" uid="uid://bysyj6wa0fieu" path="res://assets/audio/kenney_ui-audio/Audio/switch10.ogg" id="17_tc4j1"]
[ext_resource type="AudioStream" uid="uid://7gpoth4mw7hl" path="res://assets/audio/kenney_ui-audio/Audio/switch11.ogg" id="18_k27rk"]
[ext_resource type="AudioStream" uid="uid://d4isnagb1ec1o" path="res://assets/audio/kenney_ui-audio/Audio/switch12.ogg" id="19_75t5p"]
[ext_resource type="AudioStream" uid="uid://18aw316v2ekm" path="res://assets/audio/kenney_ui-audio/Audio/switch13.ogg" id="20_l78bs"]
[ext_resource type="AudioStream" uid="uid://dd8et1lqibta" path="res://assets/audio/kenney_ui-audio/Audio/switch14.ogg" id="21_4a7qx"]
[ext_resource type="AudioStream" uid="uid://hkrr0xbsy4r6" path="res://assets/audio/kenney_ui-audio/Audio/switch15.ogg" id="22_8qqqc"]
[ext_resource type="AudioStream" uid="uid://dkqch65h6eokt" path="res://assets/audio/kenney_ui-audio/Audio/switch16.ogg" id="23_vj74o"]
[ext_resource type="AudioStream" uid="uid://do34lkwp7x55r" path="res://assets/audio/kenney_ui-audio/Audio/switch17.ogg" id="24_c370f"]
[ext_resource type="AudioStream" uid="uid://2r1o4i0g4lsj" path="res://assets/audio/kenney_ui-audio/Audio/switch18.ogg" id="25_0hl1y"]
[ext_resource type="AudioStream" uid="uid://ck10oi5myfkur" path="res://assets/audio/kenney_ui-audio/Audio/switch19.ogg" id="26_4v6gu"]
[ext_resource type="AudioStream" uid="uid://h5j2ol1hsyg2" path="res://assets/audio/kenney_ui-audio/Audio/switch20.ogg" id="27_5xbfe"]
[ext_resource type="AudioStream" uid="uid://b1nudoqam3kxl" path="res://assets/audio/kenney_ui-audio/Audio/switch21.ogg" id="28_wotwd"]
[ext_resource type="AudioStream" uid="uid://dw25cbxq735xx" path="res://assets/audio/kenney_ui-audio/Audio/switch22.ogg" id="29_jux6y"]
[ext_resource type="AudioStream" uid="uid://c06eewodtbnje" path="res://assets/audio/kenney_ui-audio/Audio/switch23.ogg" id="30_k2da2"]
[ext_resource type="AudioStream" uid="uid://buoi7tqsx57vx" path="res://assets/audio/kenney_ui-audio/Audio/switch24.ogg" id="31_i1r68"]
[ext_resource type="AudioStream" uid="uid://bgo1abru0osi6" path="res://assets/audio/kenney_ui-audio/Audio/switch25.ogg" id="32_0eafr"]
[ext_resource type="AudioStream" uid="uid://cadr270jahx8n" path="res://assets/audio/kenney_ui-audio/Audio/switch26.ogg" id="33_4mc8t"]
[ext_resource type="AudioStream" uid="uid://c2esxvwvvdxka" path="res://assets/audio/kenney_ui-audio/Audio/switch27.ogg" id="34_hadae"]
[ext_resource type="AudioStream" uid="uid://8uairjkwhqwu" path="res://assets/audio/kenney_ui-audio/Audio/switch28.ogg" id="35_7vus6"]
[ext_resource type="AudioStream" uid="uid://dteskmgpnn0ca" path="res://assets/audio/kenney_ui-audio/Audio/switch29.ogg" id="36_5keqm"]
[ext_resource type="AudioStream" uid="uid://be8imc8k1lx4v" path="res://assets/audio/kenney_ui-audio/Audio/switch30.ogg" id="37_3as28"]
[ext_resource type="AudioStream" uid="uid://btjsl8v1vfsr5" path="res://assets/audio/kenney_ui-audio/Audio/switch31.ogg" id="38_vmj16"]
[ext_resource type="AudioStream" uid="uid://b4vgw56vf301u" path="res://assets/audio/kenney_ui-audio/Audio/switch32.ogg" id="39_jiqi7"]
[ext_resource type="AudioStream" uid="uid://dmfmjlinqd62i" path="res://assets/audio/kenney_ui-audio/Audio/switch33.ogg" id="40_mr8ks"]
[ext_resource type="AudioStream" uid="uid://cwn505tgwkp0" path="res://assets/audio/kenney_ui-audio/Audio/switch34.ogg" id="41_1i2o5"]
[ext_resource type="AudioStream" uid="uid://dsx6edlpclscg" path="res://assets/audio/kenney_ui-audio/Audio/switch35.ogg" id="42_5bphs"]
[ext_resource type="AudioStream" uid="uid://btbuhftrvtspa" path="res://assets/audio/kenney_ui-audio/Audio/switch36.ogg" id="43_nsshm"]
[ext_resource type="AudioStream" uid="uid://dhsaknua30l6" path="res://assets/audio/kenney_ui-audio/Audio/switch37.ogg" id="44_udgke"]
[ext_resource type="AudioStream" uid="uid://c3nwvwcgmuob7" path="res://assets/audio/kenney_ui-audio/Audio/switch38.ogg" id="45_nsyay"]
[ext_resource type="AudioStream" uid="uid://dw4liyuhepn4g" path="res://assets/audio/kenney_ui-audio/Audio/rollover1.ogg" id="46_60wcd"]
[ext_resource type="AudioStream" uid="uid://dghcgjir7h5dm" path="res://assets/audio/kenney_ui-audio/Audio/rollover2.ogg" id="47_d4qvq"]
[ext_resource type="AudioStream" uid="uid://qk6bnu84ewy8" path="res://assets/audio/kenney_ui-audio/Audio/rollover3.ogg" id="48_m7ufg"]
[ext_resource type="AudioStream" uid="uid://bdtd2bd2sbb3d" path="res://assets/audio/kenney_ui-audio/Audio/rollover4.ogg" id="49_7bn0o"]
[ext_resource type="AudioStream" uid="uid://s208c2rwcb20" path="res://assets/audio/kenney_ui-audio/Audio/rollover5.ogg" id="50_1y8jn"]
[ext_resource type="AudioStream" uid="uid://07k2diroxtl1" path="res://assets/audio/kenney_ui-audio/Audio/rollover6.ogg" id="51_48odo"]

[sub_resource type="FontVariation" id="FontVariation_6xpj3"]
base_font = ExtResource("1_cnwah")

[sub_resource type="Theme" id="Theme_7t2kr"]
default_font = SubResource("FontVariation_6xpj3")

[sub_resource type="GDScript" id="GDScript_5kh0j"]
script/source = "extends Control

enum states{
	start_page,
	gameplay,
	gameover,
	pause,
	settings,
	exit
}

@export var ui_start_page:Control
@export var ui_game:Control
@export var ui_over:Control
@export var ui_pause:Control
@export var ui_settings:Control
@export var ui_exit:Control

@export var state := states.gameplay
var prev_states:Array[states]=[]

var sfx_cd:=1.0
@export var button_sounds:AudioList
@export var switch_sounds:AudioList
@export var roll_sounds:AudioList

func _ready():
	update_ui()

func _process(delta: float) -> void:
	if sfx_cd >0:
		sfx_cd -= delta

func _unhandled_input(event: InputEvent) -> void:
	if event.is_echo(): return
	if Input.is_action_just_pressed(\"ui_cancel\"):
		if state==states.gameplay:
			change_state(states.pause)
			return
		var prev = prev_states.pop_back()
		if prev != null:
			change_state(prev,false)

func change_state(new_state,add_to_stack:=true):
	if state == new_state: return
	if add_to_stack:
		prev_states.push_back(state)
	save_file(state,new_state)
	state=new_state
	update_ui()
	
	play_roll_sfx()

func save_file(old_state,new_state):
	if old_state != states.settings:return
	$save_loader.save.call()

func update_ui():
	show_UI()
	toggle_mouse_lock()
	pause_world()

func show_UI():
	ui_start_page.visible = state == states.start_page
	ui_game.visible = state == states.gameplay
	ui_over.visible = state == states.gameover
	ui_pause.visible = state == states.pause
	ui_settings.visible = state == states.settings
	ui_exit.visible = state == states.exit

func toggle_mouse_lock():
	var is_in_game = state == states.gameplay
	if is_in_game:
		Input.set_mouse_mode(Input.MOUSE_MODE_CAPTURED)
	else:
		Input.set_mouse_mode(Input.MOUSE_MODE_VISIBLE)

func pause_world():
	var is_in_game = state == states.gameplay or state == states.start_page
	get_tree().paused = !is_in_game



func play_button_sfx():
	if sfx_cd >0: return
	sfx_cd = 0.1
	AudioPool.create_sound(button_sounds)

func play_switch_sfx():
	if sfx_cd >0: return
	sfx_cd = 0.1
	AudioPool.create_sound(button_sounds)

func play_roll_sfx():
	if sfx_cd >0: return
	sfx_cd = 0.1
	AudioPool.create_sound(button_sounds)
"

[sub_resource type="Resource" id="Resource_d7d2p"]
script = ExtResource("2_bfr04")
pitch_range = Vector2(0.75, 1.25)
volume_range = Vector2(-1, 1)
streams = Array[AudioStream]([ExtResource("3_uh4a2"), ExtResource("4_s6o33"), ExtResource("5_gbxee"), ExtResource("6_n1leb"), ExtResource("7_qclgw")])

[sub_resource type="Resource" id="Resource_pi23o"]
script = ExtResource("2_bfr04")
pitch_range = Vector2(0.75, 1.25)
volume_range = Vector2(-1, 1)
streams = Array[AudioStream]([ExtResource("8_jvp7b"), ExtResource("9_udjct"), ExtResource("10_jygyq"), ExtResource("11_8wsct"), ExtResource("12_l7rcj"), ExtResource("13_7qo6n"), ExtResource("14_luetl"), ExtResource("15_ydxs8"), ExtResource("16_g325f"), ExtResource("17_tc4j1"), ExtResource("18_k27rk"), ExtResource("19_75t5p"), ExtResource("20_l78bs"), ExtResource("21_4a7qx"), ExtResource("22_8qqqc"), ExtResource("23_vj74o"), ExtResource("24_c370f"), ExtResource("25_0hl1y"), ExtResource("26_4v6gu"), ExtResource("27_5xbfe"), ExtResource("28_wotwd"), ExtResource("29_jux6y"), ExtResource("30_k2da2"), ExtResource("31_i1r68"), ExtResource("32_0eafr"), ExtResource("33_4mc8t"), ExtResource("34_hadae"), ExtResource("35_7vus6"), ExtResource("36_5keqm"), ExtResource("37_3as28"), ExtResource("38_vmj16"), ExtResource("39_jiqi7"), ExtResource("40_mr8ks"), ExtResource("41_1i2o5"), ExtResource("42_5bphs"), ExtResource("43_nsshm"), ExtResource("44_udgke"), ExtResource("45_nsyay")])

[sub_resource type="Resource" id="Resource_4vadk"]
script = ExtResource("2_bfr04")
pitch_range = Vector2(0.75, 1.25)
volume_range = Vector2(-1, 1)
streams = Array[AudioStream]([ExtResource("46_60wcd"), ExtResource("47_d4qvq"), ExtResource("48_m7ufg"), ExtResource("49_7bn0o"), ExtResource("50_1y8jn"), ExtResource("51_48odo")])

[sub_resource type="GDScript" id="GDScript_xypeh"]
script/source = "extends TextureButton

func _ready() -> void:
	connect('pressed',start) # Replace with function body.

func start():
	$\"../../../..\".play_button_sfx()
	get_tree().change_scene_to_file(\"res://scenes/3d scenes/main_scene.tscn\")
"

[sub_resource type="GDScript" id="GDScript_rcm42"]
script/source = "extends TextureButton


# Called when the node enters the scene tree for the first time.
func _ready() -> void:
	connect('pressed',_open_page) # Replace with function body.

func _open_page():
	$\"../../../..\".play_button_sfx()
	OS.shell_open(\"https://youtu.be/gN24W_psMpE\")
"

[sub_resource type="GDScript" id="GDScript_xeehh"]
script/source = "extends TextureButton


# Called when the node enters the scene tree for the first time.
func _ready() -> void:
	connect('pressed',_open_page) # Replace with function body.

func _open_page():
	$\"../../../..\".play_button_sfx()
	OS.shell_open(\"https://www.youtube.com/channel/UCq5n-U_6j3Y1CQBTotLkSKQ\")
"

[sub_resource type="GDScript" id="GDScript_qvros"]
script/source = "extends TextureButton

@onready var root = $\"../../../..\"
func _ready() -> void:
	connect('pressed',settings) # Replace with function body.

func settings():
	$\"../../../..\".play_button_sfx()
	root.change_state(root.states.settings)

"

[sub_resource type="GDScript" id="GDScript_0tnka"]
script/source = "extends TextureButton

@onready var asset_panel:=$\"../../../asset list\"
func _ready() -> void:
	connect('pressed',show_assets) # Replace with function body.

func show_assets():
	$\"../../../..\".play_button_sfx()
	asset_panel.visible = !asset_panel.visible
"

[sub_resource type="GDScript" id="GDScript_rw822"]
script/source = "extends TextureButton

func _ready() -> void:
	connect('pressed',quit) # Replace with function body.

func quit():
	$\"../../../..\".play_button_sfx()
	get_tree().quit()
"

[sub_resource type="GDScript" id="GDScript_ee03b"]
script/source = "extends NinePatchRect

func _ready() -> void:
	visible = false

func _input(event: InputEvent) -> void:
	if !visible: return
	if Input.is_action_just_pressed('ui_cancel'):
		visible = false
"

[sub_resource type="GDScript" id="GDScript_moe80"]
script/source = "extends Control
@onready var root = $'../..'
var stats

func _ready() -> void:
	root.set_meta(NameList.connect_stats_display, Callable(connect_to))

func connect_to(_stats):
	if _stats == stats: return
	if stats != null:
		stats.disconnect(NameList.health_updated,update_health)
		stats = null
	if _stats != null:
		stats=_stats
		stats.connect(NameList.health_updated,update_health)
		update_health(stats.health,stats.max_health)

@onready var hp :=$hp
func update_health(_value,_max):
	change_slider_value(hp, _value, _max)
	show_slider(hp,0.2,1)
	if _value <=0:
		character_died()

func character_died():
	root.change_state(root.states.gameover)

func refill_health():
	if stats == null: return
	stats.change_health(stats.max_health)
	var sp = stats.root.get_meta(NameList.respawn)
	if sp != null:
		sp.call_deferred()



func change_slider_value(_slider, _value, _max):
	var tween = get_tree().create_tween()
	tween.tween_property(_slider, \"value\", _value, 0.1).set_trans(Tween.TRANS_BACK)
	tween.tween_property(_slider, \"max_value\", _max, 0.1).set_trans(Tween.TRANS_BACK)

func show_slider(slider,transition,duration):
	slider.visible = true
	slider.modulate.a = 0
	var tween = create_tween()
	tween.tween_property(slider, \"modulate:a\", 1, transition)
	tween.tween_interval(duration)
	tween.tween_property(slider, \"modulate:a\", 0, transition)
	tween.tween_property(slider, \"visible\", false, 0)
"

[sub_resource type="GDScript" id="GDScript_s874g"]
script/source = "extends Control

@onready var root = $\"../..\"
var text_box = preload('res://scenes/2d scenes/dialouge_box_line.tscn')
@export var max_lines:=5

func _ready() -> void:
	var show_dialogue= Callable(new_line)
	root.set_meta(NameList.show_dialogue,show_dialogue)

func new_line(text):
	var box = text_box.instantiate()
	box.text = text
	add_child(box)

	if get_child_count() > max_lines:
		get_child(0).delete()
"

[sub_resource type="GDScript" id="GDScript_nevrt"]
script/source = "extends TextureRect

@onready var root = $\"../..\"

func _ready() -> void:
	visible = false
	var callable= Callable(show_image)
	root.set_meta(NameList.show_image,callable)

func _unhandled_input(event: InputEvent) -> void:
	if !visible: return
	if event.is_echo():return
	visible = false
	
func show_image(image):
	visible = true
	texture = image
"

[sub_resource type="GDScript" id="GDScript_elmo7"]
script/source = "extends Control
@onready var root = $'..'
func play() -> void:
	root.play_button_sfx()
	root.change_state(root.states.gameplay)

func settings() -> void:
	root.play_button_sfx()
	root.change_state(root.states.settings)

func exit() -> void:
	root.play_button_sfx()
	root.change_state(root.states.exit)
"

[sub_resource type="StyleBoxTexture" id="StyleBoxTexture_sxtie"]
texture = ExtResource("10_x3v8o")
texture_margin_left = 5.0
texture_margin_top = 5.0
texture_margin_right = 5.0
texture_margin_bottom = 5.0

[sub_resource type="StyleBoxTexture" id="StyleBoxTexture_i3ptv"]
texture = ExtResource("11_juupq")
texture_margin_left = 5.0
texture_margin_top = 5.0
texture_margin_right = 5.0
texture_margin_bottom = 5.0

[sub_resource type="StyleBoxTexture" id="StyleBoxTexture_i4nrx"]
texture = ExtResource("4_8musn")
texture_margin_left = 20.0
texture_margin_top = 20.0
texture_margin_right = 20.0
texture_margin_bottom = 20.0
expand_margin_left = 10.0
expand_margin_top = 5.0
expand_margin_right = 10.0
expand_margin_bottom = 10.0

[sub_resource type="StyleBoxTexture" id="StyleBoxTexture_tavcy"]

[sub_resource type="StyleBoxTexture" id="StyleBoxTexture_ucmnc"]
texture = ExtResource("12_bexpq")
texture_margin_left = 5.0
texture_margin_top = 5.0
texture_margin_right = 5.0
texture_margin_bottom = 5.0

[sub_resource type="StyleBoxTexture" id="StyleBoxTexture_6kyna"]
texture = ExtResource("13_hsqbb")
texture_margin_left = 5.0
texture_margin_top = 5.0
texture_margin_right = 5.0
texture_margin_bottom = 5.0

[sub_resource type="Theme" id="Theme_njgrs"]
CheckButton/colors/font_color = Color(1, 1, 1, 1)
CheckButton/colors/font_outline_color = Color(0, 0, 0, 1)
CheckButton/constants/outline_size = 0
HSlider/styles/grabber_area = SubResource("StyleBoxTexture_sxtie")
HSlider/styles/slider = SubResource("StyleBoxTexture_i3ptv")
TabContainer/styles/panel = SubResource("StyleBoxTexture_i4nrx")
TabContainer/styles/tab_disabled = SubResource("StyleBoxTexture_tavcy")
TabContainer/styles/tab_selected = SubResource("StyleBoxTexture_ucmnc")
TabContainer/styles/tab_unselected = SubResource("StyleBoxTexture_6kyna")
TabContainer/styles/tabbar_background = null

[sub_resource type="GDScript" id="GDScript_tlnk4"]
script/source = "extends BoxContainer
@onready var player = PlayerInputs
@onready var root = $\"../../..\"

@onready var mouse_slider = $\"mouse slider\"
@onready var gamepad_slider = $\"gamepad slider\"
@onready var invert_x = $\"invert x\"
@onready var invert_y = $\"invert y\"

func _ready() -> void:
	add_to_group(NameList.ui_save_load)
	mouse_slider.connect('drag_ended',mouse_changed.bind())
	gamepad_slider.connect('drag_ended',gamepad_changed.bind())
	invert_x.connect('pressed',invert_x_toggled)
	invert_y.connect('pressed',invert_y_toggled)
	get_parent().connect('tab_changed',play_sfx.bind())
	
	var tween = create_tween()
	tween.tween_interval(.2)
	tween.tween_callback(update_all)

func play_sfx(val=0):
	root.play_switch_sfx()

func update_all():
	if player == null: return
	mouse_changed(false)
	gamepad_changed(false)
	invert_x_toggled()
	invert_y_toggled()

func mouse_changed(changed:bool):
	root.play_roll_sfx()
	if changed: return
	var value = mouse_slider.value/mouse_slider.max_value
	value = lerpf(1,9,value)
	player.mouse_speed = value
#	print(player.mouse_speed)

func gamepad_changed(changed:bool):
	root.play_roll_sfx()
	if changed: return
	var value = gamepad_slider.value/gamepad_slider.max_value
	value = lerpf(1,9,value)
	player.joypad_speed = value
#	print(player.joypad_speed)

func invert_x_toggled():
	root.play_button_sfx()
	player.invert_x = -1 if invert_x.button_pressed else 1

func invert_y_toggled():
	root.play_button_sfx()
	player.invert_y = -1 if invert_y.button_pressed else 1

func _save():
		var save_dict = {
				\"node_path\" : get_path(),
				\"mouse_value\" : mouse_slider.value,
				\"gamepad_value\" : gamepad_slider.value,
				\"invert_x\": invert_x.button_pressed,
				\"invert_y\": invert_y.button_pressed,
		}
		return save_dict

func _load(data:Dictionary):
	mouse_slider.value = data.mouse_value
	gamepad_slider.value = data.gamepad_value
	invert_x.button_pressed = data.invert_x
	invert_y.button_pressed = data.invert_y

"

[sub_resource type="GDScript" id="GDScript_6c6nf"]
script/source = "extends VBoxContainer

@onready var base_button = $key
@onready var root = $\"../../../..\"

func _ready() -> void:
	add_to_group('ui_save_load')
	var tween = create_tween()
	tween.tween_interval(0.2)
	tween.tween_callback(spawn_buttons)
	tween.tween_callback(create_reset_button)

func _unhandled_input(event: InputEvent) -> void:
	assign_key(event)

func create_reset_button():
	set_text(base_button,'Reset all buttons')
	base_button.connect('pressed',reset_keymap)
func reset_keymap():
	root.play_button_sfx()
	InputMap.load_from_project_settings()
	update_all_buttons()

func update_all_buttons():
	var buttons = get_children()
	for i in range(1,buttons.size()):
		var button = buttons[i]
		var action = button.get_meta('action')
		update_button_keybinds(button,action)

func set_text(button, text):
	button.get_node('Label').text = text

func spawn_buttons():
	create_button('left',\"ui_left\")
	create_button('right',\"ui_right\")
	create_button('up',\"ui_up\")
	create_button('down',\"ui_down\")

	create_button('jump',\"ui_accept\")
	
	create_button('sprint',\"ctrl\")
	create_button('sneak',\"shift\")
	create_button('alt',\"alt\")
	create_button('tab',\"tab\")

	create_button('act',\"act\")
	create_button(\"attack\",\"attack\")
	create_button('skill',\"skill\")
	create_button(\"misc\",\"misc\")

	create_button('inventory',\"inventory\")
	create_button('drop',\"drop\")
	create_button('reload',\"reload\")
	create_button('flip',\"flip\")

func create_button(name:String, action:String):
	var button = base_button.duplicate()
	add_child(button)
	button.name = name
	button.set_meta('action',action)
	update_button_keybinds(button,action)
	button.connect('pressed',button_changed.bind(button,action))

func update_button_keybinds(button, action):
	var events = InputMap.action_get_events(action)
	var keys:=''
	for event in events:
		var input := event.as_text()
		if event is InputEventKey:
			input = OS.get_keycode_string(event.physical_keycode)
		elif event is InputEventMouseButton:
			input = str(event.button_index)
		elif event is InputEventJoypadButton:
			input = event.as_text().get_slice('(',1)
			input = input.rstrip(')')
		else:	continue
		keys+= input+ ', '
	set_text(button,button.name + ': '+keys)

func button_changed(button,action):
	root.play_button_sfx()
	if assigning_button != null: return
	if assigning_action != '': return
	set_text(button,button.name+ ': ')
	assigning_button = button
	assigning_action=action

var assigning_button:TextureButton
var assigning_action:=''
func assign_key(event):
	if root.state != root.states.settings: return
	if assigning_button == null: return
	if assigning_action == '': return
	
	var is_key = event is InputEventKey
	var is_gamepad = event is InputEventJoypadButton
	var is_mouse = event is InputEventMouseButton
	if !is_key and !is_gamepad and !is_mouse: return
	
	InputMap.action_erase_events(assigning_action)
	InputMap.action_add_event(assigning_action,event)
	update_button_keybinds(assigning_button,assigning_action)
	assigning_button = null
	assigning_action = ''

enum input_type{key,joypad,mouse}
func _save()->Dictionary:
	var save_dict = {}
	save_dict.node_path = get_path()
	for action in InputMap.get_actions():
		var buttons:=[]
		for event in InputMap.action_get_events(action):
			var button :={}
			if event is InputEventKey:
				button.type = input_type.key
				button.code = event.keycode
				button.physical_code = event.physical_keycode
				button.unicode = event.unicode
			elif event is InputEventJoypadButton:
				button.type = input_type.joypad
				button.code = event.button_index
			elif event is InputEventMouseButton:
				button.type = input_type.mouse
				button.code = event.button_index
			buttons.append(button)
		save_dict[action]=buttons
	return save_dict

func _load(save_dict:Dictionary):
	for action in InputMap.get_actions():
		if !save_dict.has(action): continue
		InputMap.action_erase_events(action)
		for button in save_dict[action]:
			if button.type==input_type.key:
				var input_event := InputEventKey.new()
				input_event.set_keycode(button.code)
				input_event.physical_keycode = button.physical_code
				input_event.unicode = button.unicode
				InputMap.action_add_event(action,input_event)
			if button.type== input_type.joypad:
				var input_event = InputEventJoypadButton.new()
				input_event.button_index = button.code
				InputMap.action_add_event(action,input_event)
			if button.type== input_type.mouse:
				var input_event = InputEventMouseButton.new()
				input_event.button_index = button.code
				InputMap.action_add_event(action,input_event)


"

[sub_resource type="GDScript" id="GDScript_j6o1j"]
script/source = "extends Control

@onready var master_slider = $Master

@onready var music_slider = $Music
@onready var sfx_slider = $SFX
@onready var sfx_2d_slider = $SFX2d
@onready var sfx_3d_slider = $SFX3d

@onready var music_button = $music_toggle
@onready var sfx_button = $sfx_toggle
@onready var sfx_2d_button = $sfx_toggle_2
@onready var sfx_3d_button = $sfx_toggle_3

var master_id:int=AudioServer.get_bus_index('Master')
var music_id:int=AudioServer.get_bus_index('Music')
var sfx_id:int=AudioServer.get_bus_index('Sfx')
var sfx_2d_id:int=AudioServer.get_bus_index('Sfx_2d')
var sfx_3d_id:int=AudioServer.get_bus_index('Sfx_3d')

func _ready() -> void:
	add_to_group(NameList.ui_save_load)
	setup_sliders()
	setup_buttons()
	
	var tween = create_tween()
	tween.tween_interval(0.2)
	tween.tween_callback(update_all_settings)

func setup_sliders():
	var args:=[master_slider,master_id]
	master_slider.connect('drag_ended',adjust_bus.bindv(args))
	
	args=[music_slider,music_id]
	music_slider.connect('drag_ended',adjust_bus.bindv(args))
	
	args=[sfx_slider,sfx_id]
	sfx_slider.connect('drag_ended',adjust_bus.bindv(args))
	
	args=[sfx_2d_slider,sfx_2d_id]
	sfx_2d_slider.connect('drag_ended', adjust_bus.bindv(args))
	
	args=[sfx_3d_slider,sfx_3d_id]
	sfx_3d_slider.connect('drag_ended', adjust_bus.bindv(args))

func setup_buttons():
	music_button.connect('toggled',toggle_music.bind())
	sfx_button.connect('toggled',toggle_sfx.bind())
	sfx_2d_button.connect('toggled',toggle_sfx_2d.bind())
	sfx_3d_button.connect('toggled',toggle_sfx_3d.bind())

func update_all_settings():
	var args:=[]
	args=[false,master_slider,master_id]
	adjust_bus.callv(args)
	args=[false,music_slider,music_id]
	adjust_bus.callv(args)
	args=[false,sfx_slider,sfx_id]
	adjust_bus.callv(args)
	args=[false,sfx_2d_slider,sfx_2d_id]
	adjust_bus.callv(args)
	args=[false,sfx_3d_slider,sfx_3d_id]
	adjust_bus.callv(args)
	
	toggle_music(music_button.button_pressed)
	toggle_sfx(sfx_button.button_pressed)
	toggle_sfx_2d(sfx_2d_button.button_pressed)
	toggle_sfx_3d(sfx_3d_button.button_pressed)

func adjust_bus(changed:bool,slider,bus:int):
	if changed: return
	var value = slider.value
	AudioServer.set_bus_volume_db(bus,value)

func toggle_music(pressed:bool):
	pass

func toggle_sfx(pressed:bool):
	AudioPool.disable_sfx = !pressed

func toggle_sfx_2d(pressed:bool):
	AudioPool.disable_sfx_2d = !pressed

func toggle_sfx_3d(pressed:bool):
	AudioPool.disable_sfx_3d = !pressed

func _save():
	var save_dict = {
		\"node_path\" : get_path(),
		
		\"master_value\" : master_slider.value,
		\"music_value\" : music_slider.value,
		
		\"sfx_toggled\": sfx_button.button_pressed,
		\"sfx_2d_toggled\": sfx_2d_button.button_pressed,
		\"sfx_3d_toggled\": sfx_3d_button.button_pressed,
		
		\"sfx_value\" : sfx_slider.value,
		\"sfx_2d_value\" : sfx_2d_slider.value,
		\"sfx_3d_value\" : sfx_3d_slider.value,
	}
	return save_dict

func _load(data:Dictionary):
	master_slider.value = data.master_value
	music_slider.value = data.music_value
	
	sfx_button.button_pressed = data.sfx_toggled
	sfx_2d_button.button_pressed = data.sfx_2d_toggled
	sfx_3d_button.button_pressed = data.sfx_3d_toggled
	
	sfx_slider.value = data.sfx_value
	sfx_2d_slider.value = data.sfx_2d_value
	sfx_3d_slider.value = data.sfx_3d_value
"

[sub_resource type="GDScript" id="GDScript_yc5g0"]
script/source = "extends BoxContainer

@onready var vsync_button = $vsync

func _ready() -> void:
	add_to_group(NameList.ui_save_load)
	vsync_button.connect('toggled',set_vsync)
	
	var tween = create_tween()
	tween.tween_interval(0.2)
	tween.tween_callback(update_all_settings)

func update_all_settings():
	set_vsync(vsync_button.button_pressed)

func set_vsync(value):
	var mode = DisplayServer.VSYNC_DISABLED 
	if value:
		mode = DisplayServer.VSYNC_ENABLED
	DisplayServer.window_set_vsync_mode(mode)

func set_brightness():
	pass
	var a = WorldEnvironment.new()
	
	
	get_viewport()

func _save():
	var save_dict = {
		\"node_path\" : get_path(),
		\"vsync\" : vsync_button.button_pressed,
	}
	return save_dict

func _load(data:Dictionary):
	vsync_button.button_pressed = data.vsync
"

[sub_resource type="GDScript" id="GDScript_a2aip"]
script/source = "extends Control
@onready var root = $'..'

func restart() -> void:
	root.play_button_sfx()
	root.change_state(root.states.gameplay) 

func exit() -> void:
	root.play_button_sfx()
	root.change_state(root.states.exit)
"

[sub_resource type="GDScript" id="GDScript_ulijc"]
script/source = "extends Control
@onready var root = $'..'

func _ready() -> void:
	connect('visibility_changed',toggled.bind())

@onready var yes_text = $List/yes/Label
@onready var no_text = $List/no/Label
func toggled():
	if !visible: return
	yes_text.text = 'yes '
	no_text.text = 'no '
	var tween = create_tween()
	for i in 3:
		tween.tween_interval(0.4)
		tween.tween_callback(add_word)

func add_word():
	yes_text.text += 'yes '
	no_text.text += 'no ' 

func no() -> void:
	root.play_button_sfx()
	root.change_state(root.states.pause)

func yes() -> void:
	root.play_button_sfx()
	get_tree().quit()# Replace with function body.
"

[sub_resource type="GDScript" id="GDScript_akyhh"]
script/source = "extends Node

@export var disable_when_debug:=false

var save:=Callable(save_game)

func _ready() -> void:
	if disable_when_debug:
		if OS.is_debug_build():
			save=Callable(dud)
			return
	load_game()

func dud():pass

var file_path := \"user://ui_save.save\"
func save_game():
	var save_game = FileAccess.open(file_path, FileAccess.WRITE)
	var save_nodes = get_tree().get_nodes_in_group( NameList.ui_save_load)
	for node in save_nodes:
		if !node.has_method(\"_save\"):
			print(str(node.name) + \"is missing a _save() function\")
			continue
		var node_data = node.call(\"_save\")
		var json_string = JSON.stringify(node_data)
		save_game.store_line(json_string)

func load_game():
	if not FileAccess.file_exists(file_path):
			return 
	var save_game = FileAccess.open(file_path, FileAccess.READ)
	while save_game.get_position() < save_game.get_length():
		var json_string = save_game.get_line()
		var json = JSON.new()
		var parse_result = json.parse(json_string)
		if not parse_result == OK:
				print(\"JSON Parse Error: \", json.get_error_message(), \" in \", json_string, \" at line \", json.get_error_line())
				continue
		var node_data = json.get_data()
		var target_node = get_node_or_null(node_data[\"node_path\"])
		if target_node == null:
			print(\"node ain't exist\")
			continue
		if !target_node.has_method(\"_load\"):
			print(\"persistent node '%s' is missing a _load() function, skipped\" % target_node.name)
			continue
		target_node._load(node_data)
"

[node name="HUD" type="Control" node_paths=PackedStringArray("ui_start_page", "ui_game", "ui_over", "ui_pause", "ui_settings", "ui_exit")]
process_mode = 3
texture_filter = 1
layout_mode = 3
anchors_preset = 0
offset_right = 1280.0
offset_bottom = 720.0
scale = Vector2(0.5, 0.5)
theme = SubResource("Theme_7t2kr")
script = SubResource("GDScript_5kh0j")
ui_start_page = NodePath("main page")
ui_game = NodePath("Gameplay")
ui_over = NodePath("Game over")
ui_pause = NodePath("Pause")
ui_settings = NodePath("Settings")
ui_exit = NodePath("Exit")
button_sounds = SubResource("Resource_d7d2p")
switch_sounds = SubResource("Resource_pi23o")
roll_sounds = SubResource("Resource_4vadk")

[node name="main page" type="Control" parent="."]
visible = false
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="NinePatchRect" type="NinePatchRect" parent="main page"]
layout_mode = 1
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_left = 10.0
offset_top = -520.0
offset_right = 230.0
offset_bottom = -20.0
grow_vertical = 0
texture = ExtResource("2_whvft")
patch_margin_left = 20
patch_margin_top = 20
patch_margin_right = 20
patch_margin_bottom = 20
axis_stretch_horizontal = 1
axis_stretch_vertical = 1

[node name="VBoxContainer" type="BoxContainer" parent="main page/NinePatchRect"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -95.0
offset_top = -77.5
offset_right = 95.0
offset_bottom = 77.5
grow_horizontal = 2
grow_vertical = 2
alignment = 2
vertical = true

[node name="start" type="TextureButton" parent="main page/NinePatchRect/VBoxContainer"]
layout_mode = 2
size_flags_horizontal = 4
size_flags_vertical = 4
texture_normal = ExtResource("3_y0kql")
texture_pressed = ExtResource("4_qnttq")
texture_hover = ExtResource("11_i8xw5")
texture_disabled = ExtResource("12_asujs")
texture_focused = ExtResource("7_pjynr")
script = SubResource("GDScript_xypeh")

[node name="Label" type="Label" parent="main page/NinePatchRect/VBoxContainer/start"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
text = "start game"
horizontal_alignment = 1
vertical_alignment = 1
autowrap_mode = 2

[node name="merch" type="TextureButton" parent="main page/NinePatchRect/VBoxContainer"]
layout_mode = 2
size_flags_horizontal = 4
size_flags_vertical = 4
texture_normal = ExtResource("5_5mmy2")
texture_pressed = ExtResource("6_wtw1i")
texture_hover = ExtResource("7_ylyai")
texture_disabled = ExtResource("8_tdxnv")
texture_focused = ExtResource("9_3n0b5")
script = SubResource("GDScript_rcm42")

[node name="Label" type="Label" parent="main page/NinePatchRect/VBoxContainer/merch"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
text = "buy awesome merch"
horizontal_alignment = 1
vertical_alignment = 1
autowrap_mode = 2

[node name="wishlist" type="TextureButton" parent="main page/NinePatchRect/VBoxContainer"]
layout_mode = 2
size_flags_horizontal = 4
size_flags_vertical = 4
texture_normal = ExtResource("5_5mmy2")
texture_pressed = ExtResource("6_wtw1i")
texture_hover = ExtResource("7_ylyai")
texture_disabled = ExtResource("8_tdxnv")
texture_focused = ExtResource("9_3n0b5")
script = SubResource("GDScript_xeehh")

[node name="Label" type="Label" parent="main page/NinePatchRect/VBoxContainer/wishlist"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
text = "wishlist chapter 2"
horizontal_alignment = 1
vertical_alignment = 1
autowrap_mode = 2

[node name="wishlist2" type="TextureButton" parent="main page/NinePatchRect/VBoxContainer"]
layout_mode = 2
size_flags_horizontal = 4
size_flags_vertical = 4
texture_normal = ExtResource("5_5mmy2")
texture_pressed = ExtResource("6_wtw1i")
texture_hover = ExtResource("7_ylyai")
texture_disabled = ExtResource("8_tdxnv")
texture_focused = ExtResource("9_3n0b5")
script = SubResource("GDScript_xeehh")

[node name="Label" type="Label" parent="main page/NinePatchRect/VBoxContainer/wishlist2"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
text = "wishlist chapter 3"
horizontal_alignment = 1
vertical_alignment = 1
autowrap_mode = 2

[node name="youtube" type="TextureButton" parent="main page/NinePatchRect/VBoxContainer"]
layout_mode = 2
size_flags_horizontal = 4
size_flags_vertical = 4
texture_normal = ExtResource("5_5mmy2")
texture_pressed = ExtResource("6_wtw1i")
texture_hover = ExtResource("7_ylyai")
texture_disabled = ExtResource("8_tdxnv")
texture_focused = ExtResource("9_3n0b5")
script = SubResource("GDScript_xeehh")

[node name="Label" type="Label" parent="main page/NinePatchRect/VBoxContainer/youtube"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
text = "youtube"
horizontal_alignment = 1
vertical_alignment = 1
autowrap_mode = 2

[node name="twitter" type="TextureButton" parent="main page/NinePatchRect/VBoxContainer"]
layout_mode = 2
size_flags_horizontal = 4
size_flags_vertical = 4
texture_normal = ExtResource("5_5mmy2")
texture_pressed = ExtResource("6_wtw1i")
texture_hover = ExtResource("7_ylyai")
texture_disabled = ExtResource("8_tdxnv")
texture_focused = ExtResource("9_3n0b5")
script = SubResource("GDScript_xeehh")

[node name="Label" type="Label" parent="main page/NinePatchRect/VBoxContainer/twitter"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
text = "twitter"
horizontal_alignment = 1
vertical_alignment = 1
autowrap_mode = 2

[node name="settings" type="TextureButton" parent="main page/NinePatchRect/VBoxContainer"]
layout_mode = 2
size_flags_horizontal = 4
size_flags_vertical = 4
texture_normal = ExtResource("3_y0kql")
texture_pressed = ExtResource("4_qnttq")
texture_hover = ExtResource("11_i8xw5")
texture_disabled = ExtResource("12_asujs")
texture_focused = ExtResource("7_pjynr")
script = SubResource("GDScript_qvros")

[node name="Label" type="Label" parent="main page/NinePatchRect/VBoxContainer/settings"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
text = "settings"
horizontal_alignment = 1
vertical_alignment = 1
autowrap_mode = 2

[node name="assets" type="TextureButton" parent="main page/NinePatchRect/VBoxContainer"]
layout_mode = 2
size_flags_horizontal = 4
size_flags_vertical = 4
texture_normal = ExtResource("3_y0kql")
texture_pressed = ExtResource("4_qnttq")
texture_hover = ExtResource("11_i8xw5")
texture_disabled = ExtResource("12_asujs")
texture_focused = ExtResource("7_pjynr")
script = SubResource("GDScript_0tnka")

[node name="Label" type="Label" parent="main page/NinePatchRect/VBoxContainer/assets"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
text = "assets"
horizontal_alignment = 1
vertical_alignment = 1
autowrap_mode = 2

[node name="exit" type="TextureButton" parent="main page/NinePatchRect/VBoxContainer"]
layout_mode = 2
size_flags_horizontal = 4
size_flags_vertical = 4
texture_normal = ExtResource("3_y0kql")
texture_pressed = ExtResource("4_qnttq")
texture_hover = ExtResource("11_i8xw5")
texture_disabled = ExtResource("12_asujs")
texture_focused = ExtResource("7_pjynr")
script = SubResource("GDScript_rw822")

[node name="Label" type="Label" parent="main page/NinePatchRect/VBoxContainer/exit"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
text = "exit"
horizontal_alignment = 1
vertical_alignment = 1
autowrap_mode = 2

[node name="asset list" type="NinePatchRect" parent="main page"]
layout_mode = 1
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_left = 275.0
offset_top = -420.0
offset_right = 775.0
offset_bottom = -20.0
grow_vertical = 0
texture = ExtResource("5_7ouj8")
patch_margin_left = 10
patch_margin_top = 10
patch_margin_right = 10
patch_margin_bottom = 10
script = SubResource("GDScript_ee03b")

[node name="RichTextLabel" type="RichTextLabel" parent="main page/asset list"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 5.0
offset_top = 5.0
offset_right = -5.0
offset_bottom = -5.0
grow_horizontal = 2
grow_vertical = 2
text = "Textures:
UI pack by Kenney Vleugels (www.kenney.nl)

Models:
Conveyor Kit (1.0)  by Kenney (www.kenney.nl)

Furniture Kit (2.0) by Kenney (www.kenney.nl)

Animated Characters  by Kenney (www.kenney.nl)

Generated models by Sloyd (https://sloyd.ai/)

Sfx:
Voiceover Pack: Fighter	by  Kenney Vleugels (Kenney.nl)

Impact Sounds (1.0) by Kenney (www.kenney.nl)

Interface Sounds (1.0) by Kenney (www.kenney.nl)

“Additional sound effects from https://www.zapsplat.com“"

[node name="Gameplay" type="Control" parent="."]
visible = false
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="Display stats" type="BoxContainer" parent="Gameplay"]
layout_mode = 0
offset_left = 5.0
offset_top = 5.0
offset_right = 205.0
offset_bottom = 25.0
vertical = true
script = SubResource("GDScript_moe80")

[node name="hp" type="TextureProgressBar" parent="Gameplay/Display stats"]
visible = false
layout_mode = 2
max_value = 10.0
step = 0.1
value = 5.0
nine_patch_stretch = true
stretch_margin_left = 10
stretch_margin_top = 10
stretch_margin_right = 10
stretch_margin_bottom = 10
texture_under = ExtResource("2_3ahfj")
texture_progress = ExtResource("2_3ahfj")
tint_under = Color(0.0980392, 0.0980392, 0.0980392, 0.501961)
tint_progress = Color(0.729412, 0, 0.345098, 1)

[node name="mp" type="TextureProgressBar" parent="Gameplay/Display stats"]
visible = false
custom_minimum_size = Vector2(100, 10)
layout_mode = 2
step = 0.1
value = 50.0
rounded = true
nine_patch_stretch = true
stretch_margin_left = 10
stretch_margin_top = 10
stretch_margin_right = 10
stretch_margin_bottom = 10
texture_under = ExtResource("2_3ahfj")
texture_progress = ExtResource("2_3ahfj")
tint_under = Color(0.0980392, 0.0980392, 0.0980392, 0.501961)
tint_progress = Color(0.415686, 0.690196, 1, 1)

[node name="cursor" type="TextureRect" parent="Gameplay"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -36.0
offset_top = -36.0
offset_right = 36.0
offset_bottom = 36.0
grow_horizontal = 2
grow_vertical = 2
scale = Vector2(0.1, 0.1)
pivot_offset = Vector2(36, 36)
texture = ExtResource("3_i7e3p")

[node name="chat_box" type="BoxContainer" parent="Gameplay"]
custom_minimum_size = Vector2(400, 250)
layout_mode = 1
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_left = 10.0
offset_top = -260.0
offset_right = 410.0
offset_bottom = -10.0
grow_vertical = 0
pivot_offset = Vector2(0, 250)
alignment = 2
vertical = true
script = SubResource("GDScript_s874g")

[node name="image content" type="TextureRect" parent="Gameplay"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -120.0
offset_top = -120.0
offset_right = 120.0
offset_bottom = 120.0
grow_horizontal = 2
grow_vertical = 2
stretch_mode = 4
script = SubResource("GDScript_nevrt")

[node name="Pause" type="NinePatchRect" parent="."]
visible = false
custom_minimum_size = Vector2(200, 200)
layout_mode = 1
anchors_preset = 4
anchor_top = 0.5
anchor_bottom = 0.5
offset_left = 10.0
offset_top = -100.0
offset_right = 210.0
offset_bottom = 100.0
grow_vertical = 2
texture = ExtResource("4_8musn")
patch_margin_left = 20
patch_margin_top = 20
patch_margin_right = 20
patch_margin_bottom = 20
script = SubResource("GDScript_elmo7")

[node name="List" type="BoxContainer" parent="Pause"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_bottom = -16.0
grow_horizontal = 2
grow_vertical = 2
alignment = 2
vertical = true

[node name="Paused" type="Label" parent="Pause/List"]
layout_mode = 2
text = "Paused"
horizontal_alignment = 1
vertical_alignment = 2

[node name="continue" type="TextureButton" parent="Pause/List"]
layout_mode = 2
size_flags_horizontal = 4
size_flags_vertical = 4
texture_normal = ExtResource("5_5mmy2")
texture_pressed = ExtResource("6_wtw1i")
texture_hover = ExtResource("7_ylyai")
texture_disabled = ExtResource("8_tdxnv")
texture_focused = ExtResource("9_3n0b5")
stretch_mode = 4

[node name="Label" type="Label" parent="Pause/List/continue"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
text = "continue"
horizontal_alignment = 1
vertical_alignment = 1

[node name="settings" type="TextureButton" parent="Pause/List"]
layout_mode = 2
size_flags_horizontal = 4
size_flags_vertical = 4
texture_normal = ExtResource("5_5mmy2")
texture_pressed = ExtResource("6_wtw1i")
texture_hover = ExtResource("7_ylyai")
texture_disabled = ExtResource("8_tdxnv")
texture_focused = ExtResource("9_3n0b5")
stretch_mode = 4

[node name="Label" type="Label" parent="Pause/List/settings"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
text = "settings"
horizontal_alignment = 1
vertical_alignment = 1

[node name="exit" type="TextureButton" parent="Pause/List"]
layout_mode = 2
size_flags_horizontal = 4
size_flags_vertical = 4
texture_normal = ExtResource("5_5mmy2")
texture_pressed = ExtResource("6_wtw1i")
texture_hover = ExtResource("7_ylyai")
texture_disabled = ExtResource("8_tdxnv")
texture_focused = ExtResource("9_3n0b5")
stretch_mode = 4

[node name="Label" type="Label" parent="Pause/List/exit"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
text = "exit"
horizontal_alignment = 1
vertical_alignment = 1

[node name="Settings" type="Control" parent="."]
visible = false
layout_mode = 1
anchors_preset = 4
anchor_top = 0.5
anchor_bottom = 0.5
offset_left = 20.0
offset_top = -20.0
offset_right = 20.0
offset_bottom = -20.0
grow_vertical = 2

[node name="TabContainer" type="TabContainer" parent="Settings"]
layout_mode = 1
anchors_preset = 4
anchor_top = 0.5
anchor_bottom = 0.5
offset_top = -99.5
offset_right = 241.0
offset_bottom = 99.5
grow_vertical = 2
theme = SubResource("Theme_njgrs")
clip_tabs = false
all_tabs_in_front = true
use_hidden_tabs_for_min_size = true

[node name="Control" type="BoxContainer" parent="Settings/TabContainer"]
layout_mode = 2
vertical = true
script = SubResource("GDScript_tlnk4")

[node name="mouse" type="Label" parent="Settings/TabContainer/Control"]
layout_mode = 2
text = "Mouse sensitivity:"

[node name="mouse slider" type="HSlider" parent="Settings/TabContainer/Control"]
layout_mode = 2
size_flags_vertical = 1
max_value = 10.0
value = 5.0
tick_count = 11
ticks_on_borders = true

[node name="gamepad" type="Label" parent="Settings/TabContainer/Control"]
layout_mode = 2
text = "Gamepad sensitivity:"

[node name="gamepad slider" type="HSlider" parent="Settings/TabContainer/Control"]
layout_mode = 2
size_flags_vertical = 1
max_value = 10.0
value = 5.0
tick_count = 11
ticks_on_borders = true

[node name="invert y" type="CheckButton" parent="Settings/TabContainer/Control"]
layout_mode = 2
text = "Invert X:"

[node name="invert x" type="CheckButton" parent="Settings/TabContainer/Control"]
layout_mode = 2
text = "Invert Y:"

[node name="keybind" type="ScrollContainer" parent="Settings/TabContainer"]
visible = false
custom_minimum_size = Vector2(0, 300)
layout_mode = 2

[node name="VBoxContainer" type="VBoxContainer" parent="Settings/TabContainer/keybind"]
layout_mode = 2
script = SubResource("GDScript_6c6nf")

[node name="key" type="TextureButton" parent="Settings/TabContainer/keybind/VBoxContainer"]
layout_mode = 2
size_flags_horizontal = 4
size_flags_vertical = 4
texture_normal = ExtResource("5_5mmy2")
texture_pressed = ExtResource("6_wtw1i")
texture_hover = ExtResource("7_ylyai")
texture_disabled = ExtResource("8_tdxnv")
texture_focused = ExtResource("9_3n0b5")

[node name="Label" type="Label" parent="Settings/TabContainer/keybind/VBoxContainer/key"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 10.0
offset_top = 5.0
offset_right = -10.0
offset_bottom = -10.0
grow_horizontal = 2
grow_vertical = 2
text = "Reset"
vertical_alignment = 1
autowrap_mode = 2

[node name="Audio" type="BoxContainer" parent="Settings/TabContainer"]
visible = false
layout_mode = 2
vertical = true
script = SubResource("GDScript_j6o1j")

[node name="master" type="Label" parent="Settings/TabContainer/Audio"]
layout_mode = 2
text = "Master:"

[node name="Master" type="HSlider" parent="Settings/TabContainer/Audio"]
layout_mode = 2
size_flags_vertical = 1
min_value = -40.0
max_value = 10.0
tick_count = 11
ticks_on_borders = true

[node name="music_toggle" type="CheckButton" parent="Settings/TabContainer/Audio"]
visible = false
layout_mode = 2
size_flags_horizontal = 0
size_flags_vertical = 0
button_pressed = true
text = "Music"

[node name="Music" type="HSlider" parent="Settings/TabContainer/Audio"]
visible = false
layout_mode = 2
min_value = -40.0
max_value = 10.0
tick_count = 11
ticks_on_borders = true

[node name="sfx_toggle" type="CheckButton" parent="Settings/TabContainer/Audio"]
layout_mode = 2
size_flags_horizontal = 0
size_flags_vertical = 0
button_pressed = true
text = "Sound effects"

[node name="SFX" type="HSlider" parent="Settings/TabContainer/Audio"]
layout_mode = 2
min_value = -40.0
max_value = 10.0
tick_count = 11
ticks_on_borders = true

[node name="sfx_toggle_2" type="CheckButton" parent="Settings/TabContainer/Audio"]
layout_mode = 2
size_flags_horizontal = 0
size_flags_vertical = 0
button_pressed = true
text = "2d sound effects"

[node name="SFX2d" type="HSlider" parent="Settings/TabContainer/Audio"]
layout_mode = 2
min_value = -40.0
max_value = 10.0
tick_count = 11
ticks_on_borders = true

[node name="sfx_toggle_3" type="CheckButton" parent="Settings/TabContainer/Audio"]
layout_mode = 2
size_flags_horizontal = 0
size_flags_vertical = 0
button_pressed = true
text = "3d sound effects"

[node name="SFX3d" type="HSlider" parent="Settings/TabContainer/Audio"]
layout_mode = 2
min_value = -40.0
max_value = 10.0
tick_count = 11
ticks_on_borders = true

[node name="Visual" type="BoxContainer" parent="Settings/TabContainer"]
visible = false
layout_mode = 2
vertical = true
script = SubResource("GDScript_yc5g0")

[node name="vsync" type="CheckButton" parent="Settings/TabContainer/Visual"]
layout_mode = 2
size_flags_horizontal = 0
size_flags_vertical = 0
text = "Vsync"

[node name="Game over" type="NinePatchRect" parent="."]
visible = false
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -101.0
offset_top = -50.0
offset_right = 99.0
offset_bottom = 100.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("4_8musn")
patch_margin_left = 20
patch_margin_top = 20
patch_margin_right = 20
patch_margin_bottom = 20
script = SubResource("GDScript_a2aip")

[node name="List" type="BoxContainer" parent="Game over"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
alignment = 1
vertical = true

[node name="texr" type="Label" parent="Game over/List"]
layout_mode = 2
text = "Game over"
horizontal_alignment = 1

[node name="restart" type="TextureButton" parent="Game over/List"]
layout_mode = 2
size_flags_horizontal = 4
size_flags_vertical = 4
toggle_mode = true
texture_normal = ExtResource("10_s564t")
texture_pressed = ExtResource("11_i8xw5")
texture_hover = ExtResource("12_asujs")

[node name="Label" type="Label" parent="Game over/List/restart"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
text = "respawn"
horizontal_alignment = 1
vertical_alignment = 1

[node name="exit" type="TextureButton" parent="Game over/List"]
layout_mode = 2
size_flags_horizontal = 4
size_flags_vertical = 4
toggle_mode = true
texture_normal = ExtResource("10_s564t")
texture_pressed = ExtResource("11_i8xw5")
texture_hover = ExtResource("12_asujs")

[node name="Label" type="Label" parent="Game over/List/exit"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
text = "exit"
horizontal_alignment = 1
vertical_alignment = 1

[node name="Exit" type="NinePatchRect" parent="."]
visible = false
layout_mode = 1
anchors_preset = 4
anchor_top = 0.5
anchor_bottom = 0.5
offset_left = 10.0
offset_top = -57.5
offset_right = 210.0
offset_bottom = 92.5
grow_vertical = 2
texture = ExtResource("4_8musn")
patch_margin_left = 20
patch_margin_top = 20
patch_margin_right = 20
patch_margin_bottom = 20
script = SubResource("GDScript_ulijc")

[node name="List" type="BoxContainer" parent="Exit"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
alignment = 1
vertical = true

[node name="continue" type="Label" parent="Exit/List"]
custom_minimum_size = Vector2(200, 25)
layout_mode = 2
text = "Exit game?"
horizontal_alignment = 1

[node name="no" type="TextureButton" parent="Exit/List"]
layout_mode = 2
size_flags_horizontal = 4
size_flags_vertical = 4
texture_normal = ExtResource("5_5mmy2")
texture_pressed = ExtResource("6_wtw1i")
texture_hover = ExtResource("7_ylyai")
texture_disabled = ExtResource("8_tdxnv")
texture_focused = ExtResource("9_3n0b5")

[node name="Label" type="Label" parent="Exit/List/no"]
layout_direction = 1
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -11.5
offset_top = -10.5
offset_right = 11.5
offset_bottom = 10.5
grow_horizontal = 2
grow_vertical = 2
text = "no"
horizontal_alignment = 1
vertical_alignment = 1

[node name="yes" type="TextureButton" parent="Exit/List"]
layout_mode = 2
size_flags_horizontal = 4
size_flags_vertical = 4
texture_normal = ExtResource("5_5mmy2")
texture_pressed = ExtResource("6_wtw1i")
texture_hover = ExtResource("7_ylyai")
texture_disabled = ExtResource("8_tdxnv")
texture_focused = ExtResource("9_3n0b5")

[node name="Label" type="Label" parent="Exit/List/yes"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -17.0
offset_top = -10.5
offset_right = 17.0
offset_bottom = 10.5
grow_horizontal = 2
grow_vertical = 2
text = "yes"
horizontal_alignment = 1
vertical_alignment = 1

[node name="save_loader" type="Node" parent="."]
script = SubResource("GDScript_akyhh")

[connection signal="pressed" from="Pause/List/continue" to="Pause" method="play"]
[connection signal="pressed" from="Pause/List/settings" to="Pause" method="settings"]
[connection signal="pressed" from="Pause/List/exit" to="Pause" method="exit"]
[connection signal="pressed" from="Game over/List/restart" to="Gameplay/Display stats" method="refill_health"]
[connection signal="pressed" from="Game over/List/restart" to="Game over" method="restart"]
[connection signal="pressed" from="Game over/List/exit" to="Game over" method="exit"]
[connection signal="pressed" from="Exit/List/no" to="Exit" method="no"]
[connection signal="pressed" from="Exit/List/yes" to="Exit" method="yes"]
